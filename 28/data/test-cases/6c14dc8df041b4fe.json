{"uid":"6c14dc8df041b4fe","name":"Successfully delete meme by its id","fullName":"tests.test_delete_meme.TestDeleteMeme#test_delete_meme_success","historyId":"a0e6c2536490c833ffd95ddbae4b6541","time":{"start":1764520011035,"stop":1764520011479,"duration":444},"status":"failed","statusMessage":"AssertionError: Expected status code 404, but got 200","statusTrace":"self = <test_delete_meme.TestDeleteMeme object at 0x7f5d241cdbd0>\ndelete_meme_api = <endpoints.delete_meme.DeleteMeme object at 0x7f5d24376e40>\nget_meme_api = <endpoints.get_meme.GetMeme object at 0x7f5d24377e00>\nmeme_id = 10, auth_headers = {'Authorization': 'mdToB8vSPtJ18TP'}\n\n    @allure.feature('Memes')\n    @allure.story('Delete meme')\n    @allure.title('Successfully delete meme by its id')\n    @pytest.mark.smoke\n    @pytest.mark.positive\n    @pytest.mark.delete\n    def test_delete_meme_success(\n        self, delete_meme_api, get_meme_api, meme_id, auth_headers\n    ):\n        delete_meme_api.delete_meme(meme_id, auth_headers)\n        delete_meme_api.assert_response_status(200)\n        delete_meme_api.assert_delete_message()\n    \n        get_meme_api.get_meme(meme_id, auth_headers)\n>       get_meme_api.assert_response_status(404)\n\ntests/test_delete_meme.py:25: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <endpoints.get_meme.GetMeme object at 0x7f5d24377e00>, status = 404\n\n    @allure.step('Assert response status is {status}')\n    def assert_response_status(self, status):\n        assert (\n>           self.status_code == status\n        ), f'Expected status code {status}, but got {self.status_code}'\nE       AssertionError: Expected status code 404, but got 200\n\nendpoints/base_api.py:26: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"delete_meme_api","time":{"start":1764520010424,"stop":1764520010424,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"get_meme_api","time":{"start":1764520010424,"stop":1764520010424,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"auth_token","time":{"start":1764520010424,"stop":1764520010844,"duration":420},"status":"passed","steps":[{"name":"Send POST request to get authorization token","time":{"start":1764520010424,"stop":1764520010654,"duration":230},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"auth_data","value":"{'name': 'kate'}"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Check if token is valid","time":{"start":1764520010654,"stop":1764520010844,"duration":190},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"auth_api","time":{"start":1764520010424,"stop":1764520010424,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"post_meme_api","time":{"start":1764520010424,"stop":1764520010424,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"posted_meme","time":{"start":1764520010844,"stop":1764520011034,"duration":190},"status":"passed","steps":[{"name":"Send POST request to add new meme","time":{"start":1764520010844,"stop":1764520011034,"duration":190},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"meme_data","value":"{'text': 'Открыл книгу, а вот закрыть не получается..', 'url': 'https://t.me/python_community_rus/27/168416', 'tags': ['it', 'linux', 'editors', 'vim'], 'info': {'group': 'https://t.me/python_community_rus', 'admin': 'https://t.me/artemshumeiko'}}"},{"name":"auth_data","value":"{'Authorization': 'mdToB8vSPtJ18TP'}"},{"name":"validate","value":"True"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"auth_headers","time":{"start":1764520010844,"stop":1764520010844,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"meme_id","time":{"start":1764520011035,"stop":1764520011035,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Expected status code 404, but got 200","statusTrace":"self = <test_delete_meme.TestDeleteMeme object at 0x7f5d241cdbd0>\ndelete_meme_api = <endpoints.delete_meme.DeleteMeme object at 0x7f5d24376e40>\nget_meme_api = <endpoints.get_meme.GetMeme object at 0x7f5d24377e00>\nmeme_id = 10, auth_headers = {'Authorization': 'mdToB8vSPtJ18TP'}\n\n    @allure.feature('Memes')\n    @allure.story('Delete meme')\n    @allure.title('Successfully delete meme by its id')\n    @pytest.mark.smoke\n    @pytest.mark.positive\n    @pytest.mark.delete\n    def test_delete_meme_success(\n        self, delete_meme_api, get_meme_api, meme_id, auth_headers\n    ):\n        delete_meme_api.delete_meme(meme_id, auth_headers)\n        delete_meme_api.assert_response_status(200)\n        delete_meme_api.assert_delete_message()\n    \n        get_meme_api.get_meme(meme_id, auth_headers)\n>       get_meme_api.assert_response_status(404)\n\ntests/test_delete_meme.py:25: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <endpoints.get_meme.GetMeme object at 0x7f5d24377e00>, status = 404\n\n    @allure.step('Assert response status is {status}')\n    def assert_response_status(self, status):\n        assert (\n>           self.status_code == status\n        ), f'Expected status code {status}, but got {self.status_code}'\nE       AssertionError: Expected status code 404, but got 200\n\nendpoints/base_api.py:26: AssertionError","steps":[{"name":"Send DELETE request to delete object by its id","time":{"start":1764520011035,"stop":1764520011254,"duration":219},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"meme_id","value":"10"},{"name":"auth_data","value":"{'Authorization': 'mdToB8vSPtJ18TP'}"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Assert response status is 200","time":{"start":1764520011254,"stop":1764520011254,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"status","value":"200"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Assert successful deletion message","time":{"start":1764520011254,"stop":1764520011254,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Send GET request to get meme by id","time":{"start":1764520011254,"stop":1764520011477,"duration":223},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"meme_id","value":"10"},{"name":"auth_headers","value":"{'Authorization': 'mdToB8vSPtJ18TP'}"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Assert response status is 404","time":{"start":1764520011478,"stop":1764520011478,"duration":0},"status":"failed","statusMessage":"AssertionError: Expected status code 404, but got 200\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.13.9/x64/lib/python3.13/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n  File \"/home/runner/work/memesapi_tests/memesapi_tests/endpoints/base_api.py\", line 26, in assert_response_status\n    self.status_code == status\n","steps":[],"attachments":[],"parameters":[{"name":"status","value":"404"}],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":5,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"posted_meme::0","time":{"start":1764520011504,"stop":1764520011504,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"post_meme_api::cleanup","time":{"start":1764520011505,"stop":1764520011705,"duration":200},"status":"passed","steps":[{"name":"Send DELETE request to delete object by its id","time":{"start":1764520011505,"stop":1764520011705,"duration":200},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"meme_id","value":"10"},{"name":"auth_data","value":"{'Authorization': 'mdToB8vSPtJ18TP'}"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"labels":[{"name":"feature","value":"Memes"},{"name":"story","value":"Delete meme"},{"name":"tag","value":"delete"},{"name":"tag","value":"positive"},{"name":"tag","value":"smoke"},{"name":"tag","value":"regression"},{"name":"tag","value":"crud"},{"name":"tag","value":"memes"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_delete_meme"},{"name":"subSuite","value":"TestDeleteMeme"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"2203-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_delete_meme"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["crud","regression","smoke","positive","memes","delete"]},"source":"6c14dc8df041b4fe.json","parameterValues":[]}