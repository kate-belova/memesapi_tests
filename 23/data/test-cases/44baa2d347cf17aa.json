{"uid":"44baa2d347cf17aa","name":"Try to fully update another user meme","fullName":"tests.test_update_meme.TestUpdateMeme#test_put_another_user_meme","historyId":"6ac544d0cbf6fdeab15fc20ccc2047c7","time":{"start":1763659738926,"stop":1763659739227,"duration":301},"status":"failed","statusMessage":"AssertionError: Expected status code 403, but got 200","statusTrace":"self = <test_update_meme.TestUpdateMeme object at 0x7fb09c15a490>\nput_meme_api = <endpoints.put_meme.PutMeme object at 0x7fb09c2f2ba0>\nanother_user_meme = (34464, {'info': {'admin': 'https://t.me/artemshumeiko', 'group': 'https://t.me/python_community_rus'}, 'tags': ['it',..., 'vim'], 'text': 'Открыл книгу, а вот закрыть не получается..', 'url': 'https://t.me/python_community_rus/27/168416'})\nauth_headers = {'Authorization': '0HrdP0YSgYYfcDN'}\n\n    @allure.feature('Memes')\n    @allure.story('Fully update meme')\n    @allure.title('Try to fully update another user meme')\n    @pytest.mark.smoke\n    @pytest.mark.negative\n    @pytest.mark.fully_update\n    def test_put_another_user_meme(\n        self,\n        put_meme_api,\n        another_user_meme,\n        auth_headers,\n    ):\n        m_id = another_user_meme[0]\n        update_meme_data['id'] = m_id\n        meme_data_validated = PutMemeRequestSchema(\n            **update_meme_data\n        ).model_dump()\n        put_meme_api.update_meme(m_id, meme_data_validated, auth_headers)\n    \n>       put_meme_api.assert_response_is_403()\n\ntests/test_update_meme.py:48: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <endpoints.put_meme.PutMeme object at 0x7fb09c2f2ba0>\n\n    @allure.step('Assert response status is Forbidden')\n    def assert_response_is_403(self):\n        assert (\n>           self.status_code == 403\n        ), f'Expected status code 403, but got {self.status_code}'\nE       AssertionError: Expected status code 403, but got 200\n\nendpoints/base_api.py:42: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"another_user_auth_token","time":{"start":1763659737261,"stop":1763659737859,"duration":598},"status":"passed","steps":[{"name":"Send POST request to get authorization token","time":{"start":1763659737261,"stop":1763659737557,"duration":296},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"auth_data","value":"{'name': 'another_user'}"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Check if token is valid","time":{"start":1763659737557,"stop":1763659737859,"duration":302},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"put_meme_api","time":{"start":1763659737261,"stop":1763659737261,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_meme_api","time":{"start":1763659737261,"stop":1763659737261,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"post_meme_api","time":{"start":1763659737261,"stop":1763659737261,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"another_user_auth_headers","time":{"start":1763659737859,"stop":1763659737859,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"another_user_meme","time":{"start":1763659737859,"stop":1763659738310,"duration":451},"status":"passed","steps":[{"name":"Send POST request to add new meme","time":{"start":1763659737859,"stop":1763659738310,"duration":451},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"meme_data","value":"{'text': 'Открыл книгу, а вот закрыть не получается..', 'url': 'https://t.me/python_community_rus/27/168416', 'tags': ['it', 'linux', 'editors', 'vim'], 'info': {'group': 'https://t.me/python_community_rus', 'admin': 'https://t.me/artemshumeiko'}}"},{"name":"auth_data","value":"{'Authorization': 'FK6zaxgMuj0nDo2'}"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"auth_token","time":{"start":1763659738310,"stop":1763659738926,"duration":616},"status":"passed","steps":[{"name":"Send POST request to get authorization token","time":{"start":1763659738310,"stop":1763659738608,"duration":298},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"auth_data","value":"{'name': 'kate'}"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Check if token is valid","time":{"start":1763659738608,"stop":1763659738926,"duration":318},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"auth_headers","time":{"start":1763659738926,"stop":1763659738926,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Expected status code 403, but got 200","statusTrace":"self = <test_update_meme.TestUpdateMeme object at 0x7fb09c15a490>\nput_meme_api = <endpoints.put_meme.PutMeme object at 0x7fb09c2f2ba0>\nanother_user_meme = (34464, {'info': {'admin': 'https://t.me/artemshumeiko', 'group': 'https://t.me/python_community_rus'}, 'tags': ['it',..., 'vim'], 'text': 'Открыл книгу, а вот закрыть не получается..', 'url': 'https://t.me/python_community_rus/27/168416'})\nauth_headers = {'Authorization': '0HrdP0YSgYYfcDN'}\n\n    @allure.feature('Memes')\n    @allure.story('Fully update meme')\n    @allure.title('Try to fully update another user meme')\n    @pytest.mark.smoke\n    @pytest.mark.negative\n    @pytest.mark.fully_update\n    def test_put_another_user_meme(\n        self,\n        put_meme_api,\n        another_user_meme,\n        auth_headers,\n    ):\n        m_id = another_user_meme[0]\n        update_meme_data['id'] = m_id\n        meme_data_validated = PutMemeRequestSchema(\n            **update_meme_data\n        ).model_dump()\n        put_meme_api.update_meme(m_id, meme_data_validated, auth_headers)\n    \n>       put_meme_api.assert_response_is_403()\n\ntests/test_update_meme.py:48: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <endpoints.put_meme.PutMeme object at 0x7fb09c2f2ba0>\n\n    @allure.step('Assert response status is Forbidden')\n    def assert_response_is_403(self):\n        assert (\n>           self.status_code == 403\n        ), f'Expected status code 403, but got {self.status_code}'\nE       AssertionError: Expected status code 403, but got 200\n\nendpoints/base_api.py:42: AssertionError","steps":[{"name":"Send PUT request to fully update meme by id","time":{"start":1763659738926,"stop":1763659739226,"duration":300},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"meme_id","value":"34464"},{"name":"meme_data","value":"{'id': 34464, 'text': 'bad memory', 'url': 'https://t.me/itgid_info/1802', 'tags': [], 'info': {}}"},{"name":"auth_data","value":"{'Authorization': '0HrdP0YSgYYfcDN'}"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Assert response status is Forbidden","time":{"start":1763659739226,"stop":1763659739226,"duration":0},"status":"failed","statusMessage":"AssertionError: Expected status code 403, but got 200\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.13.9/x64/lib/python3.13/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n  File \"/home/runner/work/memesapi_tests/memesapi_tests/endpoints/base_api.py\", line 42, in assert_response_is_403\n    self.status_code == 403\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"another_user_meme::0","time":{"start":1763659739251,"stop":1763659739545,"duration":294},"status":"passed","steps":[{"name":"Send DELETE request to delete object by its id","time":{"start":1763659739251,"stop":1763659739545,"duration":294},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"meme_id","value":"34464"},{"name":"auth_data","value":"{'Authorization': 'FK6zaxgMuj0nDo2'}"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"post_meme_api::cleanup","time":{"start":1763659739547,"stop":1763659739897,"duration":350},"status":"passed","steps":[{"name":"Send DELETE request to delete object by its id","time":{"start":1763659739547,"stop":1763659739897,"duration":350},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"meme_id","value":"34464"},{"name":"auth_data","value":"{'Authorization': 'FK6zaxgMuj0nDo2'}"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"labels":[{"name":"feature","value":"Memes"},{"name":"story","value":"Fully update meme"},{"name":"tag","value":"fully_update"},{"name":"tag","value":"negative"},{"name":"tag","value":"smoke"},{"name":"tag","value":"regression"},{"name":"tag","value":"crud"},{"name":"tag","value":"memes"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_update_meme"},{"name":"subSuite","value":"TestUpdateMeme"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"2153-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_update_meme"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["crud","negative","regression","fully_update","smoke","memes"]},"source":"44baa2d347cf17aa.json","parameterValues":[]}